import { v4 as uuid } from "uuid";

import Icon from "ui/Icon";
import colors from "ui/theme/colors";

function FullStar({ fill, size = 16 }) {
  return <Icon name="star" fill={fill} size={size} />;
}

function HalfStar({ fill, size = 16 }) {
  return (
    <svg
      width={size}
      height={size}
      viewBox="0 0 20 20"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <mask
        id="mask0"
        mask-type="alpha"
        maskUnits="userSpaceOnUse"
        x="0"
        y="0"
        width="20"
        height="20"
      >
        <path
          d="M18.8659 8.62638C19.0422 8.44665 19.1668 8.21944 19.2256 7.97027C19.2844 7.72111 19.2752 7.45985 19.1989 7.21584C19.1226 6.97182 18.9823 6.75472 18.7938 6.58889C18.6053 6.42307 18.3759 6.3151 18.1316 6.2771L13.4265 5.56645C13.3198 5.55072 13.2183 5.50827 13.1309 5.44276C13.0435 5.37725 12.9728 5.29065 12.9248 5.19042L10.8215 0.764376C10.7112 0.53475 10.5415 0.341578 10.3314 0.206553C10.1213 0.0715289 9.87902 0 9.6319 0C9.38478 0 9.14255 0.0715289 8.93242 0.206553C8.72229 0.341578 8.55258 0.53475 8.44235 0.764376L6.33571 5.19042C6.28804 5.29022 6.2178 5.37654 6.13101 5.44202C6.04421 5.50751 5.94343 5.5502 5.83729 5.56645L1.13224 6.2771C0.887867 6.3151 0.658536 6.42307 0.469997 6.58889C0.281458 6.75472 0.141177 6.97182 0.064904 7.21584C-0.0113689 7.45985 -0.020613 7.72111 0.0382097 7.97027C0.0970325 8.21944 0.221593 8.44665 0.397905 8.62638L3.80375 12.0761C3.87831 12.155 3.93353 12.2514 3.96475 12.357C3.99598 12.4627 4.0023 12.5746 3.98318 12.6833L3.18904 17.5475C3.14778 17.8009 3.17551 18.0612 3.26912 18.2992C3.36272 18.5371 3.51846 18.7432 3.71881 18.8942C3.91915 19.0451 4.15613 19.135 4.40303 19.1537C4.64993 19.1724 4.89695 19.1191 5.11625 18.9998L9.32288 16.7023C9.41819 16.6503 9.52424 16.6231 9.6319 16.6231C9.73956 16.6231 9.84561 16.6503 9.94092 16.7023L14.1476 18.9998C14.3391 19.1045 14.5524 19.1589 14.7689 19.1585C14.9619 19.1578 15.1525 19.1135 15.3273 19.0287C15.5022 18.9438 15.6571 18.8204 15.7814 18.6671C15.9056 18.5138 15.9963 18.3342 16.0469 18.1409C16.0976 17.9475 16.1071 17.745 16.0748 17.5475L15.2806 12.6833C15.2622 12.5732 15.2698 12.4601 15.3028 12.3538C15.3358 12.2474 15.3932 12.1509 15.47 12.0727L18.8659 8.62638Z"
          fill={colors[fill]}
        />
      </mask>
      <g mask="url(#mask0)">
        <path
          d="M18.8659 8.62638C19.0422 8.44665 19.1668 8.21944 19.2256 7.97027C19.2844 7.72111 19.2752 7.45985 19.1989 7.21584C19.1226 6.97182 18.9823 6.75472 18.7938 6.58889C18.6053 6.42307 18.3759 6.3151 18.1316 6.2771L13.4265 5.56645C13.3198 5.55072 13.2183 5.50827 13.1309 5.44276C13.0435 5.37725 12.9728 5.29065 12.9248 5.19042L10.8215 0.764376C10.7112 0.53475 10.5415 0.341578 10.3314 0.206553C10.1213 0.0715289 9.87902 0 9.6319 0C9.38478 0 9.14255 0.0715289 8.93242 0.206553C8.72229 0.341578 8.55258 0.53475 8.44235 0.764376L6.33571 5.19042C6.28804 5.29022 6.2178 5.37654 6.13101 5.44202C6.04421 5.50751 5.94343 5.5502 5.83729 5.56645L1.13224 6.2771C0.887867 6.3151 0.658536 6.42307 0.469997 6.58889C0.281458 6.75472 0.141177 6.97182 0.064904 7.21584C-0.0113689 7.45985 -0.020613 7.72111 0.0382097 7.97027C0.0970325 8.21944 0.221593 8.44665 0.397905 8.62638L3.80375 12.0761C3.87831 12.155 3.93353 12.2514 3.96475 12.357C3.99598 12.4627 4.0023 12.5746 3.98318 12.6833L3.18904 17.5475C3.14778 17.8009 3.17551 18.0612 3.26912 18.2992C3.36272 18.5371 3.51846 18.7432 3.71881 18.8942C3.91915 19.0451 4.15613 19.135 4.40303 19.1537C4.64993 19.1724 4.89695 19.1191 5.11625 18.9998L9.32288 16.7023C9.41819 16.6503 9.52424 16.6231 9.6319 16.6231C9.73956 16.6231 9.84561 16.6503 9.94092 16.7023L14.1476 18.9998C14.3391 19.1045 14.5524 19.1589 14.7689 19.1585C14.9619 19.1578 15.1525 19.1135 15.3273 19.0287C15.5022 18.9438 15.6571 18.8204 15.7814 18.6671C15.9056 18.5138 15.9963 18.3342 16.0469 18.1409C16.0976 17.9475 16.1071 17.745 16.0748 17.5475L15.2806 12.6833C15.2622 12.5732 15.2698 12.4601 15.3028 12.3538C15.3358 12.2474 15.3932 12.1509 15.47 12.0727L18.8659 8.62638Z"
          fill="#C9CED4"
        />
        <path
          d="M18.8659 8.62638C19.0422 8.44665 19.1668 8.21944 19.2256 7.97027C19.2844 7.72111 19.2752 7.45985 19.1989 7.21584C19.1226 6.97182 18.9823 6.75472 18.7938 6.58889C18.6053 6.42307 18.3759 6.3151 18.1316 6.2771L13.4265 5.56645C13.3198 5.55072 13.2183 5.50827 13.1309 5.44276C13.0435 5.37725 12.9728 5.29065 12.9248 5.19042L10.8215 0.764376C10.7112 0.53475 10.5415 0.341578 10.3314 0.206553C10.1213 0.0715289 9.87902 0 9.6319 0C9.38478 0 9.14255 0.0715289 8.93242 0.206553C8.72229 0.341578 8.55258 0.53475 8.44235 0.764376L6.33571 5.19042C6.28804 5.29022 6.2178 5.37654 6.13101 5.44202C6.04421 5.50751 5.94343 5.5502 5.83729 5.56645L1.13224 6.2771C0.887867 6.3151 0.658536 6.42307 0.469997 6.58889C0.281458 6.75472 0.141177 6.97182 0.064904 7.21584C-0.0113689 7.45985 -0.020613 7.72111 0.0382097 7.97027C0.0970325 8.21944 0.221593 8.44665 0.397905 8.62638L3.80375 12.0761C3.87831 12.155 3.93353 12.2514 3.96475 12.357C3.99598 12.4627 4.0023 12.5746 3.98318 12.6833L3.18904 17.5475C3.14778 17.8009 3.17551 18.0612 3.26912 18.2992C3.36272 18.5371 3.51846 18.7432 3.71881 18.8942C3.91915 19.0451 4.15613 19.135 4.40303 19.1537C4.64993 19.1724 4.89695 19.1191 5.11625 18.9998L9.32288 16.7023C9.41819 16.6503 9.52424 16.6231 9.6319 16.6231C9.73956 16.6231 9.84561 16.6503 9.94092 16.7023L14.1476 18.9998C14.3391 19.1045 14.5524 19.1589 14.7689 19.1585C14.9619 19.1578 15.1525 19.1135 15.3273 19.0287C15.5022 18.9438 15.6571 18.8204 15.7814 18.6671C15.9056 18.5138 15.9963 18.3342 16.0469 18.1409C16.0976 17.9475 16.1071 17.745 16.0748 17.5475L15.2806 12.6833C15.2622 12.5732 15.2698 12.4601 15.3028 12.3538C15.3358 12.2474 15.3932 12.1509 15.47 12.0727L18.8659 8.62638Z"
          fill={colors[fill]}
        />
        <rect x="10" width="10" height="20" fill="#C4C4C4" />
      </g>
    </svg>
  );
}

function EmptyStar({ size = 16 }) {
  return <Icon name="star" fill="gray200" size={size} />;
}

interface Props {
  state: "FULL" | "HALF" | "EMPTY";
  numberOfStars: number;
  size?: number;
  starsColor?: keyof typeof colors;
}

export function renderStars({ state, numberOfStars, size, starsColor }: Props) {
  switch (state) {
    case "FULL":
      return [...Array(numberOfStars)].map(() => (
        <FullStar key={uuid()} size={size} fill={starsColor} />
      ));
    case "HALF":
      return [...Array(numberOfStars)].map(() => (
        <HalfStar key={uuid()} size={size} fill={starsColor} />
      ));
    case "EMPTY":
      return [...Array(numberOfStars)].map(() => (
        <EmptyStar key={uuid()} size={size} />
      ));
    default:
      return null;
  }
}
